{"version":3,"file":"seek.js","sources":["pages/seek/seek.vue","pages/seek/seek.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<view class=\"filter-box\">\n\t\t\t<van-search \n\t\t\t\t:value=\"filterDest\" \n\t\t\t\tplaceholder=\"ÊêúÁ¥¢ÁõÆÁöÑÂú∞ (Â¶Ç: ÈÉΩÊüèÊûó)\" \n\t\t\t\tuse-action-slot \n\t\t\t\t@change=\"onSearchChange\" \n\t\t\t\t@search=\"onSearch\"\n\t\t\t>\n\t\t\t</van-search>\n\t\t</view>\n\n\t\t<view class=\"list-box\">\n\t\t\t<block v-for=\"(item, index) in displayList\" :key=\"index\">\n\t\t\t\t<van-card\n\t\t\t\t\tuse-thumb-slot\n\t\t\t\t\tuse-title-slot\n\t\t\t\t\tuse-footer-slot\n\t\t\t\t>\n\t\t\t\t\t<view slot=\"thumb\" class=\"city-thumb\" @click=\"showDetail(item)\">\n\t\t\t\t\t\t<image \n\t\t\t\t\t\t\t:src=\"getCityImage(item.destination)\" \n\t\t\t\t\t\t\tmode=\"aspectFill\" \n\t\t\t\t\t\t\tclass=\"thumb-image\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view slot=\"title\" class=\"card-title-box\" @click=\"showDetail(item)\">\n\t\t\t\t\t\t<text class=\"origin-text\">{{ item.origin }}</text>\n\t\t\t\t\t\t<text class=\"fly-icon\"> ‚û°Ô∏è </text> <text class=\"dest-text\">{{ item.destination }}</text>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view slot=\"desc\" class=\"card-desc-box\" @click=\"showDetail(item)\">\n\t\t\t\t\t\t<view class=\"date-row\">ÊúüÊúõÊó•Êúü: {{ item.date }}</view>\n\t\t\t\t\t\t<view class=\"item-row\">{{ item.item_desc }}</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view slot=\"footer\">\n\t\t\t\t\t\t<van-button \n\t\t\t\t\t\t\tsize=\"small\" \n\t\t\t\t\t\t\ttype=\"primary\" \n\t\t\t\t\t\t\tround \n\t\t\t\t\t\t\tcolor=\"#7dc5eb\"\n\t\t\t\t\t\t\t@click.stop=\"showDetail(item)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tÊü•ÁúãÈúÄÊ±ÇËØ¶ÊÉÖ\n\t\t\t\t\t\t</van-button>\n\t\t\t\t\t</view>\n\t\t\t\t</van-card>\n\t\t\t\t\n\t\t\t\t<view style=\"height: 10px;\"></view> </block>\n\t\t\t\n            <van-empty v-if=\"displayList.length === 0\" description=\"ÊöÇÊó†Áõ∏ÂÖ≥ÈúÄÊ±Ç\" />\n\t\t</view>\n\n\t\t<view class=\"fab-button\" @click=\"goToPost\">\n\t\t\t<van-icon name=\"plus\" color=\"white\" size=\"30px\" />\n\t\t</view>\n\n\t\t<van-popup :show=\"isShowPopup\" round position=\"bottom\" custom-style=\"height: 60%\" @close=\"isShowPopup = false\">\n\t\t\t<view class=\"popup-content\">\n\t\t\t\t<view class=\"popup-title\">ÈúÄÊ±ÇËØ¶ÊÉÖ</view>\n\t\t\t\t<van-cell-group>\n\t\t\t\t\t<van-cell title=\"Áâ©ÂìÅÊâÄÂú®Âú∞\" :value=\"currentItem.origin || ''\" />\n\t\t\t\t\t<van-cell title=\"ÈÄÅËææÁõÆÁöÑÂú∞\" :value=\"currentItem.destination || ''\" />\n\t\t\t\t\t<van-cell title=\"ÊúüÊúõÊó•Êúü\" :value=\"currentItem.date || ''\" />\n\t\t\t\t\t<van-cell title=\"Áâ©ÂìÅÊèèËø∞\" :value=\"currentItem.item_desc || ''\" />\n\t\t\t\t\t<van-cell title=\"Â§áÊ≥®\" :label=\"currentItem.remark || ''\" />\n\t\t\t\t</van-cell-group>\n\t\t\t\t\n\t\t\t\t<view style=\"padding: 20px; margin-top: 20px;\">\n\t\t\t\t\t<van-button v-if=\"!wechatRevealed\" type=\"primary\" color=\"#7dc5eb\" block round @click=\"revealWechat\">ÊòæÁ§∫ÂæÆ‰ø°Âè∑</van-button>\n\t\t\t\t\t\n\t\t\t\t\t<view v-else class=\"wechat-box\">\n\t\t\t\t\t\t<text class=\"wx-text\">ÂæÆ‰ø°Âè∑Ôºö{{ currentItem.wechat }}</text>\n\t\t\t\t\t\t<van-button size=\"small\" type=\"info\" color=\"#7dc5eb\" @click=\"copyWechat\">Â§çÂà∂</van-button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</van-popup>\n\t\t\n\t\t<van-toast id=\"van-toast\" />\n\t</view>\n</template>\n\n<script>\n\timport Toast from '/wxcomponents/vant/toast/toast';\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tfilterDest: '',\n\t\t\t\tisShowPopup: false,\n\t\t\t\twechatRevealed: false,\n\t\t\t\tcurrentItem: {},\n\t\t\t\t// ÂõæÁâáÊò†Â∞Ñ (Âíå Travel È°µ‰øùÊåÅ‰∏ÄËá¥)\n\t\t\t\tcityImageMap: {\n\t\t\t\t\t'Âåó‰∫¨': 'https://7072-prod-3gsdhmmz4c25f5b7-1395072016.tcb.qcloud.la/images/beijing.jpg?sign=81e9cc12932785bbcb226895d0ff2388&t=1768322246',\n\t\t\t\t\t'‰∏äÊµ∑': 'https://7072-prod-3gsdhmmz4c25f5b7-1395072016.tcb.qcloud.la/images/shanghai.jpg?sign=1f12e7902c9213ff82bbfdcb07afd871&t=1768322174',\n\t\t\t\t\t'‰º¶Êï¶': 'https://7072-prod-3gsdhmmz4c25f5b7-1395072016.tcb.qcloud.la/images/london.jpg?sign=365f2858e4bb6ce40f86e3fb402e4df1&t=1768322214',\n\t\t\t\t\t'Á∫ΩÁ∫¶': 'https://7072-prod-3gsdhmmz4c25f5b7-1395072016.tcb.qcloud.la/images/newyork.jpg?sign=54adcf9b78283241f09f26f51f135957&t=1768322184',\n\t\t\t\t\t'ÈÉΩÊüèÊûó': 'https://7072-prod-3gsdhmmz4c25f5b7-1395072016.tcb.qcloud.la/images/dublin.jpg?sign=c8d637691f61ab4a3267df882571c449&t=1768322225',\n\t\t\t\t\t'ËãèÈªé‰∏ñ': 'https://7072-prod-3gsdhmmz4c25f5b7-1395072016.tcb.qcloud.la/images/zurich.jpg?sign=5f1e8a0e7958c88d478316603872000b&t=1768322143',\n\t\t\t\t\t'Ëµ´Â∞îËæõÂü∫': 'https://7072-prod-3gsdhmmz4c25f5b7-1395072016.tcb.qcloud.la/images/helsinki.jpg?sign=3f3d9f2f08903c5597005efce4651a10&t=1768322236',\n\t\t\t\t\t'Â¢®Â∞îÊú¨': 'https://7072-prod-3gsdhmmz4c25f5b7-1395072016.tcb.qcloud.la/images/melbourne.jpg?sign=df4c84bb38fcd4f0eb7c2094e8137bdc&t=1768322206'\n\t\t\t\t},\n\t\t\t\tdefaultImage: '/static/cloudcarry.png',\n\t\t\t\t\n\t\t\t\t// Mock Data (ÂØÑ‰ª∂‰∫∫Êï∞ÊçÆ)\n\t\t\t\trawData: []\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tdisplayList() {\n\t\t\t\tif (!this.filterDest) return this.rawData;\n\t\t\t\treturn this.rawData.filter(item => item.destination.includes(this.filterDest));\n\t\t\t}\n\t\t},\n\t\tonShow() {\n\t\t        this.fetchList();\n\t\t},\n\t\tmethods: {\n\t\t\tonSearchChange(e) { this.filterDest = e.detail; },\n\t\t\tonSearch() { },\n\t\t\t\n\t\t\tgetCityImage(destination) {\n\t\t\t\tfor (let key in this.cityImageMap) {\n\t\t\t\t\tif (destination.includes(key)) {\n\t\t\t\t\t\treturn this.cityImageMap[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.defaultImage;\n\t\t\t},\n\t\t\t\n\t\t\tgoToPost() {\n\t\t\t\t// ÂÖ≥ÈîÆÁÇπÔºöËøôÈáå‰º†ÂèÇÊòØ type=sender\n\t\t\t\tuni.navigateTo({ url: '/pages/post/post?type=sender' });\n\t\t\t},\n\t\t\t\n\t\t\tshowDetail(item) {\n\t\t\t\tthis.currentItem = item;\n\t\t\t\tthis.wechatRevealed = false;\n\t\t\t\tthis.isShowPopup = true;\n\t\t\t},\n\t\t\t\n\t\t\trevealWechat() {\n\t\t\t\tconst myInfo = uni.getStorageSync('user_profile');\n\t\t\t\tif(!myInfo || !myInfo.wechat) {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle:'ÊèêÁ§∫', content:'ËØ∑ÂÖàÂéª[ÊàëÁöÑ]È°µÈù¢ÂÆåÂñÑÊÇ®ÁöÑÂæÆ‰ø°Âè∑',\n\t\t\t\t\t\tconfirmText:'ÂéªÂÆåÂñÑ',\n\t\t\t\t\t\tsuccess: (res) => { if(res.confirm) uni.switchTab({url:'/pages/profile/profile'}) }\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.wechatRevealed = true;\n\t\t\t},\n\t\t\t\n\t\t\tcopyWechat() {\n\t\t\t\tuni.setClipboardData({\n\t\t\t\t\tdata: this.currentItem.wechat,\n\t\t\t\t\tsuccess: () => { Toast.success('Â∑≤Â§çÂà∂'); }\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 1. Ëé∑ÂèñÂàóË°®\n\t\t\tfetchList() {\n\t\t\t\tuni.showLoading({ title: 'Âä†ËΩΩ‰∏≠...' });\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: '/api/posts',\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: { type: 'sender' }\n\t\t\t\t}).then(data => {\n\t\t\t\t\tthis.rawData = data.map(item => ({\n\t\t\t\t\t    ...item,\n\t\t\t\t\t    capacity: item.capacity || '',   // Èò≤Ê≠¢ null\n\t\t\t\t\t    item_desc: item.item_desc || '', // Èò≤Ê≠¢ null\n\t\t\t\t\t    remark: item.remark || ''        // Èò≤Ê≠¢ null\n\t\t\t\t\t})); // ÂêéÁ´ØÁõ¥Êé•ËøîÂõûÊï∞ÁªÑ\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t// È¶ñÊ¨°Âä†ËΩΩÂ¶ÇÊûúÊ≤°Êï∞ÊçÆÊàñÊä•ÈîôÔºåÁªô‰∏™Á©∫Êï∞ÁªÑÈò≤Ê≠¢Â¥©\n\t\t\t\t\tthis.rawData = [];\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 2. ÊòæÁ§∫ÂæÆ‰ø°Âè∑ÔºàÊùÉÈôêÈÄªËæëÔºâ\n\t\t\trevealWechat() {\n\t\t\t\t // ÂÖàÊ£ÄÊü•Êú¨Âú∞ÊúâÊ≤°ÊúâÂæÆ‰ø°Âè∑\n\t\t\t\t const myInfo = uni.getStorageSync('user_profile');\n\t\t\t\t if(!myInfo || !myInfo.wechat) {\n\t\t\t\t\t uni.showModal({\n\t\t\t\t\t\ttitle: 'ÊèêÁ§∫', content: 'ËØ∑ÂÖàÂéª[ÊàëÁöÑ]È°µÈù¢ÂÆåÂñÑÊÇ®ÁöÑÂæÆ‰ø°Âè∑',\n\t\t\t\t\t\tconfirmText: 'ÂéªÂÆåÂñÑ',\n\t\t\t\t\t\tsuccess: (res) => { if(res.confirm) uni.switchTab({url:'/pages/profile/profile'}) }\n\t\t\t\t\t });\n\t\t\t\t\t return;\n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t // üî¥ Ê†∏ÂøÉÔºöÂêëÂêéÁ´ØËØ∑Ê±ÇÊïèÊÑüÊï∞ÊçÆ\n\t\t\t\t this.$http({\n\t\t\t\t\t url: `/api/posts/${this.currentItem.id}/contact`,\n\t\t\t\t\t method: 'GET'\n\t\t\t\t }).then(res => {\n\t\t\t\t\t // ÊàêÂäüÊãøÂà∞Êï∞ÊçÆ\n\t\t\t\t\t // Vue2 ÂÜôÊ≥ï (Uni-app ÈªòËÆ§ÊòØ Vue2/3 Ê∑∑ÂêàÔºåÂ¶ÇÊûúÁïåÈù¢‰∏çÂà∑Êñ∞Áî®Ëøô‰∏™)\n\t\t\t\t\t this.$set(this.currentItem, 'wechat', res.wechat); \n\t\t\t\t\t this.wechatRevealed = true;\n\t\t\t\t }).catch(err => {\n\t\t\t\t\t if (err.statusCode === 429) {\n\t\t\t\t\t\t uni.showToast({ title: '‰ªäÊó•Êü•ÁúãÊ¨°Êï∞Â∑≤Ëææ‰∏äÈôê', icon: 'none' });\n\t\t\t\t\t } else {\n\t\t\t\t\t\t uni.showToast({ title: 'Êü•ÁúãÂ§±Ë¥•', icon: 'none' });\n\t\t\t\t\t }\n\t\t\t\t });\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.container { background-color: #f7f8fa; min-height: 100vh; padding-bottom: 80px; }\n\t.list-box { padding: 10px; }\n\t\n\t/* ÂõæÁâáÊ†∑Âºè */\n\t.thumb-image { width: 90px; height: 90px; border-radius: 8px; }\n\t\n\t/* Ê†áÈ¢òÊ†∑Âºè */\n\t.card-title-box { font-size: 16px; font-weight: bold; margin-bottom: 8px; }\n\t.origin-text { color: #333; }\n\t.fly-icon { color: #999; margin: 0 5px; font-size: 14px; font-weight: bold; } /* ÁÆ≠Â§¥Á®çÂæÆÂ§ß‰∏ÄÁÇπ */\n\t.dest-text { color: #333; }\n\t\n\t/* ÊèèËø∞Ê†∑Âºè */\n\t.card-desc-box { color: #666; font-size: 14px; }\n\t.date-row { margin-bottom: 5px; }\n\t\n\t/* Áâ©ÂìÅÊèèËø∞ - ÈªëËâ≤Âä†Á≤ó */\n\t.item-row { color: #666; font-size: 14px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }\n\t\n\t/* ÊÇ¨ÊµÆÊåâÈíÆ */\n\t.fab-button {\n\t\tposition: fixed; right: 20px; bottom: 30px;\n\t\twidth: 60px; height: 60px;\n\t\tbackground-color: #7dc5eb;\n\t\tborder-radius: 50%;\n\t\tdisplay: flex; align-items: center; justify-content: center;\n\t\tbox-shadow: 0 4px 10px rgba(0,122,255,0.3);\n\t\tz-index: 99;\n\t}\n\t\n\t/* ÂºπÁ™óÊ†∑Âºè */\n\t.popup-content { padding: 20px; }\n\t.popup-title { font-size: 18px; font-weight: bold; text-align: center; margin-bottom: 20px; }\n\t.wechat-box { background: #f0f9eb; padding: 15px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }\n\t.wx-text { font-size: 16px; font-weight: bold; color: #333; }\n</style>","import MiniProgramPage from '/Users/fvinci6/Documents/HBuilderProjects/CloudCarry/frontend_pack/pages/seek/seek.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","Toast"],"mappings":"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"}