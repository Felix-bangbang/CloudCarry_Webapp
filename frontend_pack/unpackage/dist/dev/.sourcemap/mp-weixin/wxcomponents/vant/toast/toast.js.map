{"version":3,"file":"toast.js","sources":["wxcomponents/vant/toast/toast.js"],"sourcesContent":["import { isObj } from '../common/validator';\nconst defaultOptions = {\n    type: 'text',\n    mask: false,\n    message: '',\n    show: true,\n    zIndex: 1000,\n    duration: 2000,\n    position: 'middle',\n    forbidClick: false,\n    loadingType: 'circular',\n    selector: '#van-toast',\n};\nlet queue = [];\nlet currentOptions = Object.assign({}, defaultOptions);\nfunction parseOptions(message) {\n    return isObj(message) ? message : { message };\n}\nfunction getContext() {\n    const pages = getCurrentPages();\n    return pages[pages.length - 1];\n}\nfunction Toast(toastOptions) {\n    const options = Object.assign(Object.assign({}, currentOptions), parseOptions(toastOptions));\n    const context = (typeof options.context === 'function'\n        ? options.context()\n        : options.context) || getContext();\n    const toast = context.selectComponent(options.selector);\n    if (!toast) {\n        console.warn('未找到 van-toast 节点，请确认 selector 及 context 是否正确');\n        return;\n    }\n    delete options.context;\n    delete options.selector;\n    toast.clear = () => {\n        toast.setData({ show: false });\n        if (options.onClose) {\n            options.onClose();\n        }\n    };\n    queue.push(toast);\n    toast.setData(options);\n    clearTimeout(toast.timer);\n    if (options.duration != null && options.duration > 0) {\n        toast.timer = setTimeout(() => {\n            toast.clear();\n            queue = queue.filter((item) => item !== toast);\n        }, options.duration);\n    }\n    return toast;\n}\nconst createMethod = (type) => (options) => Toast(Object.assign({ type }, parseOptions(options)));\nToast.loading = createMethod('loading');\nToast.success = createMethod('success');\nToast.fail = createMethod('fail');\nToast.clear = () => {\n    queue.forEach((toast) => {\n        toast.clear();\n    });\n    queue = [];\n};\nToast.setDefaultOptions = (options) => {\n    Object.assign(currentOptions, options);\n};\nToast.resetDefaultOptions = () => {\n    currentOptions = Object.assign({}, defaultOptions);\n};\nexport default Toast;\n"],"names":["isObj","uni"],"mappings":";;;AACA,MAAM,iBAAiB;AAAA,EACnB,MAAM;AAAA,EACN,MAAM;AAAA,EACN,SAAS;AAAA,EACT,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,UAAU;AAAA,EACV,UAAU;AAAA,EACV,aAAa;AAAA,EACb,aAAa;AAAA,EACb,UAAU;AACd;AACA,IAAI,QAAQ,CAAA;AACZ,IAAI,iBAAiB,OAAO,OAAO,CAAE,GAAE,cAAc;AACrD,SAAS,aAAa,SAAS;AAC3B,SAAOA,mCAAK,MAAC,OAAO,IAAI,UAAU,EAAE,QAAO;AAC/C;AACA,SAAS,aAAa;AAClB,QAAM,QAAQ;AACd,SAAO,MAAM,MAAM,SAAS,CAAC;AACjC;AACA,SAAS,MAAM,cAAc;AACzB,QAAM,UAAU,OAAO,OAAO,OAAO,OAAO,CAAE,GAAE,cAAc,GAAG,aAAa,YAAY,CAAC;AAC3F,QAAM,WAAW,OAAO,QAAQ,YAAY,aACtC,QAAQ,QAAS,IACjB,QAAQ,YAAY;AAC1B,QAAM,QAAQ,QAAQ,gBAAgB,QAAQ,QAAQ;AACtD,MAAI,CAAC,OAAO;AACRC,kBAAAA,MAAA,MAAA,QAAA,0CAAa,8CAA8C;AAC3D;AAAA,EACH;AACD,SAAO,QAAQ;AACf,SAAO,QAAQ;AACf,QAAM,QAAQ,MAAM;AAChB,UAAM,QAAQ,EAAE,MAAM,MAAO,CAAA;AAC7B,QAAI,QAAQ,SAAS;AACjB,cAAQ,QAAO;AAAA,IAClB;AAAA,EACT;AACI,QAAM,KAAK,KAAK;AAChB,QAAM,QAAQ,OAAO;AACrB,eAAa,MAAM,KAAK;AACxB,MAAI,QAAQ,YAAY,QAAQ,QAAQ,WAAW,GAAG;AAClD,UAAM,QAAQ,WAAW,MAAM;AAC3B,YAAM,MAAK;AACX,cAAQ,MAAM,OAAO,CAAC,SAAS,SAAS,KAAK;AAAA,IACzD,GAAW,QAAQ,QAAQ;AAAA,EACtB;AACD,SAAO;AACX;AACA,MAAM,eAAe,CAAC,SAAS,CAAC,YAAY,MAAM,OAAO,OAAO,EAAE,KAAI,GAAI,aAAa,OAAO,CAAC,CAAC;AAChG,MAAM,UAAU,aAAa,SAAS;AACtC,MAAM,UAAU,aAAa,SAAS;AACtC,MAAM,OAAO,aAAa,MAAM;AAChC,MAAM,QAAQ,MAAM;AAChB,QAAM,QAAQ,CAAC,UAAU;AACrB,UAAM,MAAK;AAAA,EACnB,CAAK;AACD,UAAQ,CAAA;AACZ;AACA,MAAM,oBAAoB,CAAC,YAAY;AACnC,SAAO,OAAO,gBAAgB,OAAO;AACzC;AACA,MAAM,sBAAsB,MAAM;AAC9B,mBAAiB,OAAO,OAAO,CAAE,GAAE,cAAc;AACrD;;"}